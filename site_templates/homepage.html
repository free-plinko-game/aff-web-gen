{% extends "base.html" %}

{% block body_content %}
{% if preview_asset_prefix %}
{% set prefix = preview_asset_prefix %}
{% else %}
{% set prefix = '' %}
{% endif %}

<!-- HERO -->
<section class="hero">
    <div class="hero-inner">
        <div class="hero-badge">&#127942; {{ content.hero_badge | default('Updated ' ~ year) }}</div>
        <h1>{{ content.hero_title }}</h1>
        <p class="hero-sub">{{ content.hero_subtitle }}</p>
        <div class="hero-ctas">
            <a href="/tips/" class="hero-cta-btn hero-cta-primary">
                Today's Tips &rarr;
            </a>
            <a href="{{ compare_url }}" class="hero-cta-btn hero-cta-secondary">
                Best Sportsbooks &rarr;
            </a>
        </div>
    </div>
</section>

<!-- TRUST BAR -->
<div class="trust-bar">
    <div class="trust-bar-inner">
        {% if page_counts.tips > 0 %}
        <div class="trust-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4"/><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"/></svg>
            {{ page_counts.tips }}+ Expert Tips
        </div>
        {% endif %}
        <div class="trust-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4"/><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"/></svg>
            {{ page_counts.brands }} Sportsbooks Reviewed
        </div>
        <div class="trust-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4"/><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"/></svg>
            Updated Daily
        </div>
    </div>
</div>

<!-- SECTION: BETTING TIPS PREVIEW -->
<section class="hp-section hp-section--alt">
    <div class="hp-section-inner">
        <div class="hp-section-header">
            <h2>Latest Betting Tips</h2>
            <a href="/tips/" class="hp-section-link">View All Tips &rarr;</a>
        </div>

        {% if tips_preview %}
        <div class="hp-tips-row">
            {% for tip in tips_preview %}
            <a href="/tips/{{ tip.slug }}" class="hp-tip-card">
                {% if tip.competition %}
                <div class="hp-tip-comp">{{ tip.competition }}</div>
                {% endif %}
                <h3 class="hp-tip-title">{{ tip.title }}</h3>
                {% if tip.match_date %}
                <div class="hp-tip-date">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px;vertical-align:-2px;margin-right:4px;"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>
                    {{ tip.match_date }}
                </div>
                {% endif %}
                {% if tip.prediction_result %}
                <div class="hp-tip-prediction{% if tip.prediction_confidence == 'High' %} hp-tip-prediction--high{% elif tip.prediction_confidence == 'Medium' %} hp-tip-prediction--medium{% else %} hp-tip-prediction--low{% endif %}">
                    {{ tip.prediction_result }}
                    {% if tip.prediction_confidence %}
                    <span class="hp-tip-confidence">({{ tip.prediction_confidence }})</span>
                    {% endif %}
                </div>
                {% endif %}
                <span class="hp-tip-readmore">Read Tip &rarr;</span>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div class="hp-placeholder">
            <p>Tips coming soon &mdash; check back daily for expert match predictions.</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- SECTION: TOP RATED BRANDS -->
<section class="hp-section">
    <div class="hp-section-inner">
        <div class="hp-section-header">
            <h2>Top Rated Sportsbooks{% if geo_name %} in {{ geo_name }}{% endif %}</h2>
            <a href="{{ compare_url }}" class="hp-section-link">Compare All &rarr;</a>
        </div>

        <div class="hp-brands-grid">
            {% for brand in site_brands[:5] %}
            <div class="hp-brand-card">
                <div class="hp-brand-logo">
                    {% if brand.logo_filename %}
                    <img src="{{ prefix }}assets/logos/{{ brand.logo_filename }}" alt="{{ brand.name }}">
                    {% else %}
                    <div class="hp-brand-initials">{{ brand.name[:2] | upper }}</div>
                    {% endif %}
                </div>
                <div class="hp-brand-info">
                    <h3>{{ brand.name }}</h3>
                    {% if brand.rating %}
                    <div class="hp-brand-rating">
                        <div class="stars">
                            {% set full_stars = brand.rating | int %}
                            {% for i in range(5) %}
                            <svg viewBox="0 0 24 24" fill="currentColor"{% if i >= full_stars %} style="opacity:0.3"{% endif %}><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                            {% endfor %}
                        </div>
                        <span class="hp-brand-score">{{ brand.rating }}/5</span>
                    </div>
                    {% endif %}
                    {% if brand.welcome_bonus %}
                    <div class="hp-brand-bonus">{{ brand.welcome_bonus }}</div>
                    {% endif %}
                    {% if brand.feature_badges %}
                    <div class="hp-brand-badges">
                        {% for badge in brand.feature_badges[:3] %}
                        <span class="hp-brand-badge">{{ badge }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                <div class="hp-brand-actions">
                    <a href="{{ brand.affiliate_link or '#' }}" class="cta-button" target="_blank" rel="nofollow noopener">
                        Visit Site
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                    {% if brand.slug in review_slugs %}
                    <a href="/reviews/{{ brand.slug }}" class="hp-brand-review-link">Read Review &rarr;</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- SECTION: LATEST NEWS -->
{% if news_preview %}
<section class="hp-section hp-section--alt">
    <div class="hp-section-inner">
        <div class="hp-section-header">
            <h2>Latest Betting News</h2>
            <a href="/news/" class="hp-section-link">All News &rarr;</a>
        </div>

        <div class="hp-news-grid">
            {% for article in news_preview %}
            <a href="/news/{{ article.slug }}" class="hp-news-card">
                <h3 class="hp-news-title">{{ article.title }}</h3>
                <div class="hp-news-meta">
                    {% if article.published_date %}
                    <span class="hp-news-date">{{ article.published_date }}</span>
                    {% endif %}
                    {% if article.author_name %}
                    <span class="hp-news-author">{{ article.author_name }}</span>
                    {% endif %}
                </div>
                {% if article.summary %}
                <p class="hp-news-excerpt">{{ article.summary }}</p>
                {% endif %}
                <span class="hp-news-readmore">Read More &rarr;</span>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- SECTION: MEET OUR EXPERTS -->
{% if has_authors and authors_list %}
<section class="hp-section">
    <div class="hp-section-inner">
        <div class="hp-section-header">
            <h2>Meet Our Experts</h2>
            <a href="/authors/" class="hp-section-link">View All &rarr;</a>
        </div>

        <div class="hp-authors-grid">
            {% for author in authors_list %}
            <div class="hp-author-card">
                {% if author.avatar_filename %}
                <img src="{{ prefix }}assets/avatars/{{ author.avatar_filename }}" alt="{{ author.name }}" class="hp-author-avatar">
                {% else %}
                <span class="hp-author-initials" style="background:{{ author.color }}">{{ author.initials }}</span>
                {% endif %}
                <div class="hp-author-info">
                    <h3>{{ author.name }}</h3>
                    {% if author.role %}
                    <div class="hp-author-role">{{ author.role }}</div>
                    {% endif %}
                    {% if author.short_bio %}
                    <p class="hp-author-bio">{{ author.short_bio[:100] }}{% if author.short_bio | length > 100 %}&hellip;{% endif %}</p>
                    {% endif %}
                    <div class="hp-author-stats">
                        <span>{{ author.article_count }} article{{ 's' if author.article_count != 1 }}</span>
                    </div>
                </div>
                <a href="/authors/{{ author.slug }}" class="hp-author-link">View Profile &rarr;</a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- SECTION: SEO CONTENT -->
<section class="hp-section hp-section--alt">
    <div class="hp-section-inner hp-seo-content">

        {% if content.why_trust_us %}
        <div class="content-block">
            <h2>{{ content.why_trust_us_title | default('Why Trust Our Recommendations') }}</h2>
            <p>{{ content.why_trust_us }}</p>
        </div>
        {% endif %}

        {% if content.faq %}
        <div class="content-block">
            <h2>Frequently Asked Questions</h2>
            <div style="height:0.75rem;"></div>
            <div class="faq-list">
                {% for item in content.faq %}
                <div class="faq-item{% if loop.first %} active{% endif %}">
                    <button class="faq-question">
                        {{ item.question }}
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                    </button>
                    <div class="faq-answer">{{ item.answer }}</div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        {% if content.closing_paragraph %}
        <div class="content-block">
            <p>{{ content.closing_paragraph }}</p>
        </div>
        {% endif %}

    </div>
</section>

{% endblock body_content %}
